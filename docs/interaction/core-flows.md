# Folio（页集）- 核心交互流程

> 版本：1.0
> 创建日期：2026-02-20
> 关联文档：[PRD](../design/prd.md) | [系统架构](../architecture/system-design.md)

---

## 设计信条

> "Simplicity is the ultimate sophistication."
> — Leonardo da Vinci

### 产品定位

**Folio 是一个安静的知识收藏家。** 它不张扬，不打扰，只在你需要的时候，把你收藏过的每一篇好内容，干干净净地呈现在你面前。

### 一句话

> **分享链接，知识留住。**

### 设计原则

1. **安静** — 没有花哨的动效，没有弹窗打扰。工具就该像工具，沉默、可靠。
2. **高效** — 收藏一篇文章不超过 2 秒。找到一篇文章不超过 3 秒。
3. **有质感** — 每一个像素都经过打磨。排版讲究，留白充分，字体舒适。
4. **本地优先** — 你的知识属于你。全部存在设备上，离线可读，永远不丢。

### 设计关键词

**克制。精确。纸质感。**

- **克制**：不堆功能，不追潮流。每个交互都问一遍：这步能省掉吗？
- **精确**：搜索秒出结果，分类一步到位。不让用户做 AI 能做的事。
- **纸质感**：像翻阅一本私人杂志。阅读界面干净到只剩文字和思考。

---

## 一、信息架构

### 页面层级

```
Folio App
│
├── 首页（知识库）                     ← 核心页面，80% 时间在这里
│   ├── 全部收藏（默认视图）
│   ├── 分类筛选
│   ├── 标签筛选
│   └── 时间线视图
│
├── 搜索                              ← 全文搜索，随时可达
│   ├── 搜索建议
│   ├── 搜索历史
│   └── 搜索结果
│
├── 阅读页                            ← 沉浸阅读，从列表点入
│   ├── Markdown 正文渲染
│   ├── 文章元信息
│   └── 阅读操作（高亮/标注/分享）
│
├── AI 问答（Pro+）                   ← 基于知识库的对话
│   ├── 对话界面
│   └── 引用来源
│
└── 设置                              ← 极少访问
    ├── 账号管理
    ├── 订阅管理
    ├── 数据管理
    └── iCloud 同步
```

### 导航结构

采用单 NavigationStack 架构，没有底部 Tab Bar。克制到极致——一个入口，所有功能自然延伸。

```
┌─────────────────────────────────────────┐
│  Folio                          ⚙️       │
│  ┌─────────────────────────────────┐    │
│  │  🔍 搜索收藏...                  │    │
│  └─────────────────────────────────┘    │
│                                         │
│              文章列表区域                 │
│              (分类筛选条)                 │
│              (标签筛选)                   │
│                                         │
└─────────────────────────────────────────┘
```

| 区域 | 说明 |
|------|------|
| 搜索栏 | 内嵌 `.searchable()` 修饰符，下拉显示在导航栏下方 |
| 工具栏齿轮图标 | 通过 NavigationLink 进入设置页 |
| 文章列表 | 收藏库主界面，浏览所有收藏内容，支持分类和标签筛选 |

**为什么是单 NavigationStack 而不是 Tab Bar？**

Folio 的核心体验就是浏览和搜索收藏。搜索通过 `.searchable()` 内嵌在首页，用户随时可用无需切换；设置是低频操作，放在工具栏即可。一个入口，零切换成本——这才是真正的克制。

---

## 二、手势系统

### 全局手势

| 手势 | 位置 | 作用 | 说明 |
|------|------|------|------|
| **左滑** | 内容列表项 | 删除收藏 | 红色删除按钮，需确认 |
| **右滑** | 内容列表项 | 切换已读/未读 | 标记为已阅读或未阅读 |
| **长按** | 内容列表项 | 弹出快捷操作菜单 | 分享、编辑标签、删除 |
| **下拉** | 列表顶部 | 刷新（检查待处理任务） | 如有离线队列，触发抓取 |
| **捏合** | 列表页面 | 切换列表/卡片视图 | 两指捏合切换紧凑视图 |

### 阅读页手势

| 手势 | 作用 | 说明 |
|------|------|------|
| **左滑边缘** | 返回列表 | 标准 iOS 返回手势 |
| **长按文字** | 高亮/标注 | 弹出高亮颜色选择 |
| **双指点击** | 收起/展开目录 | 长文快速导航 |
| **上下滑动** | 滚动阅读 | 自然滚动 |

---

## 三、流程 1 — 首次使用

### 目标

从下载到完成第一次收藏 < 3 分钟。让用户在空状态下不迷茫，有明确的行动指引。

### 流程图

```
下载并打开 App
       │
       ▼
┌──────────────────────────────┐
│          欢迎页 1/4           │
│                              │
│     ┌──────────────────┐     │
│     │                  │     │
│     │   📖 book.pages   │     │
│     │                  │     │
│     └──────────────────┘     │
│                              │
│         Folio · 页集          │
│                              │
│   分享链接，知识留住            │
│                              │
│          [继续]  →            │
│                              │
└──────────────┬───────────────┘
               │
               ▼
┌──────────────────────────────┐
│          欢迎页 2/4           │
│                              │
│     ┌──────────────────┐     │
│     │ ↑ square.and.     │     │
│     │   arrow.up        │     │
│     └──────────────────┘     │
│                              │
│       轻松保存                │
│                              │
│   Safari、微信、Twitter...    │
│   一键分享到 Folio             │
│                              │
│          [继续]  →            │
│                              │
└──────────────┬───────────────┘
               │
               ▼
┌──────────────────────────────┐
│          欢迎页 3/4           │
│                              │
│     ┌──────────────────┐     │
│     │  🔒 lock.shield   │     │
│     └──────────────────┘     │
│                              │
│     本地优先，隐私安全         │
│                              │
│   你的数据留在你的设备上        │
│                              │
│          [继续]  →            │
│                              │
└──────────────┬───────────────┘
               │
               ▼
┌──────────────────────────────┐
│          欢迎页 4/4           │
│                              │
│     ┌──────────────────┐     │
│     │  📡 shareplay     │     │
│     └──────────────────┘     │
│                              │
│        Share Extension       │
│     最快捷的保存方式           │
│                              │
│   [Sign in with Apple]       │
│   [Dev Login] (DEBUG only)   │
│   稍后再说（跳过登录）         │
│                              │
└──────────────┬───────────────┘
               │ Apple ID 一键登录
               │ （或跳过，稍后登录）
               ▼
┌──────────────────────────────┐
│   PermissionView（权限请求页） │
│                              │
│   Folio 需要以下权限来        │
│   更好地为你服务：            │
│                              │
│   ┌────────────────────────┐ │
│   │ 🔔 通知权限              │ │
│   │ 文章抓取完成时提醒你      │ │
│   │           [允许]  [跳过] │ │
│   └────────────────────────┘ │
│                              │
│   通知仅用于告知抓取状态，     │
│   不会发送任何营销信息。       │
│                              │
│          [开始使用]           │
│                              │
└──────────────┬───────────────┘
               │
               ▼
┌──────────────────────────────┐
│       空状态首页               │
│                              │
│  ┌──────────────────────┐    │
│  │  Folio               │    │
│  └──────────────────────┘    │
│                              │
│                              │
│                              │
│      ┌──────────────────┐    │
│      │                  │    │
│      │   📖              │    │
│      │                  │    │
│      │  你的知识库还是空的  │    │
│      │                  │    │
│      │  试试你的第一次收藏：│    │
│      │                  │    │
│      │  1. 打开微信/Safari │    │
│      │  2. 找到一篇好文章   │    │
│      │  3. 点击「分享」按钮 │    │
│      │  4. 选择「Folio」   │    │
│      │                  │    │
│      │  ── 或者 ──       │    │
│      │                  │    │
│      │  [粘贴链接试试]    │    │
│      │                  │    │
│      └──────────────────┘    │
│                              │
│                              │
│                              │
│                              │
└──────────────────────────────┘
```

### 空状态设计要点

空状态是用户对产品的第一印象，不能冷冰冰地说"暂无内容"。

1. **温暖的引导**：用分步骤图示告诉用户如何完成第一次收藏。
2. **粘贴链接快捷入口**：如果用户剪贴板中有 URL，显示「粘贴链接试试」按钮，点击直接收藏。这是最短的首次体验路径。
3. **不给压力**：文案用「试试」而不是「立即」。Folio 是安静的，不催促。

### 剪贴板检测逻辑

```
App 进入前台时
       │
       ├── 检测剪贴板是否有 URL
       │       │
       │       ├── 有 URL → 顶部浮出提示条：
       │       │           "检测到链接，是否收藏？ [收藏] [忽略]"
       │       │           提示条 5 秒后自动消失
       │       │
       │       └── 无 URL → 不显示任何提示
       │
       └── 首次安装且列表为空 → 空状态页面中显示粘贴按钮
```

### 首次收藏成功反馈

```
用户通过任意方式完成第一次收藏
       │
       ▼
┌──────────────────────────────┐
│                              │
│    🎉                        │
│                              │
│    第一篇收藏完成！            │
│                              │
│    ┌────────────────────┐    │
│    │ [文章缩略图]        │    │
│    │ 文章标题...         │    │
│    │ AI 正在整理中...    │    │
│    └────────────────────┘    │
│                              │
│    Folio 正在为你：           │
│    · 抓取正文                │
│    · 生成摘要                │
│    · 自动分类                │
│                              │
│    稍后就能阅读了。           │
│                              │
│    [知道了]                  │
│                              │
└──────────────────────────────┘
```

---

## 四、流程 2 — 内容收藏（核心流程）

### 目标

从点击分享到回到原 App < 2 秒。收藏过程零思考，零决策。

### 主流程：Share Extension

```
用户在任意 App（微信/Safari/微博/Twitter...）浏览内容
       │
       ▼
    点击系统「分享」按钮
       │
       ▼
    在分享面板中选择「Folio」图标
       │
       ▼
┌──────────────────────────────┐
│      Folio Share Extension    │
│                              │
│  ┌────────────────────────┐  │
│  │                        │  │
│  │  ✓ 已添加到 Folio       │  │
│  │                        │  │
│  │  AI 将在后台自动整理     │  │
│  │                        │  │
│  └────────────────────────┘  │
│                              │
│       1.5 秒后自动关闭        │
│                              │
└──────────────┬───────────────┘
               │ 自动关闭
               ▼
         回到原 App，继续浏览
               │
               ▼
        （后台异步处理）
               │
       ┌───────┴───────┐
       │               │
       ▼               ▼
   有网络时           离线时
       │               │
       ▼               ▼
  立即抓取正文      URL 加入队列
  转 Markdown      本地存储队列
  AI 分类/标签      等待网络恢复
  生成摘要          后自动处理
       │               │
       ▼               ▼
  本地存储完成      网络恢复后
  更新列表显示      自动逐条处理
```

### Share Extension 界面设计

极致简洁。不提供任何选项。不需要用户做任何决策。

```
┌──────────────────────────────┐
│                              │
│  ┌────────────────────────┐  │
│  │                        │  │
│  │     ┌────┐             │  │
│  │     │ ✓  │  已添加      │  │
│  │     └────┘             │  │
│  │                        │  │
│  │  ─────────────────── │  │
│  │  ░░░░░░░░░░░░░  进度条  │  │
│  │  ─────────────────── │  │
│  │                        │  │
│  └────────────────────────┘  │
│                              │
└──────────────────────────────┘

状态 1（瞬间）：「正在添加...」 + 进度动画
状态 2（0.5秒后）：「✓ 已添加到 Folio」
状态 3（1.5秒后）：自动关闭
```

**设计要点**：

1. **不提供分类选择**。AI 自动分类，准确率远高于用户手动选择。
2. **不提供标签输入**。AI 自动打标签。用户可以在阅读时修改。
3. **不提供备注输入**。99% 的用户不需要在收藏时写备注。
4. **只做一件事**：告诉用户"收到了"。

### 离线收藏处理

```
用户在离线状态下分享到 Folio
       │
       ▼
┌──────────────────────────────┐
│      Folio Share Extension    │
│                              │
│  ┌────────────────────────┐  │
│  │                        │  │
│  │  ✓ 已添加到 Folio       │  │
│  │                        │  │
│  │  📶 当前离线            │  │
│  │  联网后自动抓取正文      │  │
│  │                        │  │
│  └────────────────────────┘  │
│                              │
│       1.5 秒后自动关闭        │
│                              │
└──────────────────────────────┘
```

**离线队列规则**：

| 场景 | 处理方式 |
|------|---------|
| 离线时收藏 | URL 存入本地队列，标记为「待处理」 |
| 网络恢复 | 自动逐条处理队列中的 URL |
| 处理完成 | 更新列表状态，发送本地通知（如已授权） |
| 抓取失败 | 重试 3 次，仍失败则标记为「抓取失败」，保留 URL 可手动重试 |

### 收藏来源适配

| 来源 | URL 获取方式 | 特殊处理 |
|------|-------------|---------|
| Safari | 直接获取页面 URL | 标准流程 |
| 微信公众号 | 分享链接提取 | 需处理微信防盗链 |
| 微博 | 分享链接或正文提取 URL | 需展开短链接 |
| Twitter/X | 推文链接 | 需处理推文嵌入内容 |
| 即刻 | 分享链接 | 提取原文链接 |
| RSS 阅读器 | 文章链接 | 标准流程 |
| 其他 App | 任意 URL | 通用抓取逻辑 |

### 后台处理流水线

```
URL 进入处理队列
       │
       ▼
┌─ 步骤 1：URL 解析 ──────────────────┐
│  · 展开短链接                       │
│  · 处理重定向                       │
│  · 去重检测（已收藏过？提示用户）     │
│  · 超时：10 秒                      │
└──────────────┬──────────────────────┘
               │
               ▼
┌─ 步骤 2：正文抓取 ──────────────────┐
│  · Readability 算法提取正文          │
│  · 过滤广告、导航、侧边栏            │
│  · 保留正文图片                     │
│  · 超时：15 秒                      │
└──────────────┬──────────────────────┘
               │
               ▼
┌─ 步骤 3：Markdown 转换 ────────────┐
│  · HTML → 干净的 Markdown           │
│  · 保留标题层级、列表、代码块        │
│  · 图片下载到本地存储                │
│  · 处理表格、引用等格式              │
└──────────────┬──────────────────────┘
               │
               ▼
┌─ 步骤 4：AI 整理 ──────────────────┐
│  · 自动分类（技术/商业/生活/...）    │
│  · 自动打标签（2-5 个）             │
│  · 生成一句话摘要（< 50 字）        │
│  · 超时：10 秒                      │
└──────────────┬──────────────────────┘
               │
               ▼
┌─ 步骤 5：本地存储 ──────────────────┐
│  · Markdown 正文写入本地文件         │
│  · 元信息写入 SQLite                │
│  · FTS5 全文索引更新                │
│  · 图片存入本地缓存目录              │
└──────────────┬──────────────────────┘
               │
               ▼
         收藏完成，列表更新
```

---

## 五、流程 3 — 知识库浏览（主界面）

### 目标

用户打开 App，一眼看到自己的知识库全貌。能快速找到想看的内容。

### 主界面结构

```
┌──────────────────────────────────────┐
│  Folio                    [+粘贴]   │
│                                      │
│  ┌──────────────────────────────┐    │
│  │ 全部  技术  商业  生活  更多 > │    │
│  └──────────────────────────────┘    │
│  分类横向滚动条                       │
│                                      │
│  ┌──────────────────────────────┐    │
│  │ ┌──┐                        │    │
│  │ │🏷 │ 标签筛选:  Swift  AI  ... │    │
│  │ └──┘                        │    │
│  └──────────────────────────────┘    │
│                                      │
│  ── 今天 ──────────────────────────  │
│                                      │
│  ┌──────────────────────────────┐    │
│  │  [缩略图]  文章标题            │    │
│  │            一句话摘要...       │    │
│  │            来源 · 3分钟前      │    │
│  │            #标签1  #标签2      │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │  [缩略图]  文章标题            │    │
│  │            一句话摘要...       │    │
│  │            来源 · 1小时前      │    │
│  └──────────────────────────────┘    │
│                                      │
│  ── 昨天 ──────────────────────────  │
│                                      │
│  ┌──────────────────────────────┐    │
│  │  [缩略图]  文章标题            │    │
│  │            一句话摘要...       │    │
│  │            来源 · 昨天 14:20   │    │
│  └──────────────────────────────┘    │
│                                      │
│  ...                                 │
│                                      │
│                                         │
└─────────────────────────────────────────┘
```

### 内容卡片设计

每篇收藏在列表中以卡片形式展示，信息密度适中。

```
┌──────────────────────────────────────┐
│                                      │
│  ┌────┐                             │
│  │    │  SwiftUI 中的状态管理最佳实践  │
│  │ 缩 │                             │
│  │ 略 │  用 @Observable 宏替代        │
│  │ 图 │  ObservableObject，性能提升... │
│  │    │                             │
│  └────┘  objc.io · 今天 10:23        │
│          #Swift  #iOS  #架构         │
│                                      │
│  ● 未读                              │
│                                      │
└──────────────────────────────────────┘
```

**卡片信息层级**（从上到下重要性递减）：

| 层级 | 内容 | 字体 |
|------|------|------|
| 第一层 | 文章标题 | 17pt，Semibold |
| 第二层 | AI 摘要（一句话） | 15pt，Regular，次要色 |
| 第三层 | 来源 + 时间 | 13pt，Regular，灰色 |
| 第四层 | 标签 | 13pt，胶囊样式 |
| 辅助 | 未读标记（蓝色圆点） | 左侧 |
| 辅助 | 缩略图 | 左侧，60×60，圆角 8pt |

### 分类筛选

顶部横向滚动的分类标签条：

```
┌──────────────────────────────────────┐
│                                      │
│  [ 全部 ] [ 技术 ] [ 商业 ] [ 生活 ]  │
│  [ 设计 ] [ 阅读 ] [ 更多 > ]         │
│                                      │
└──────────────────────────────────────┘

· 「全部」始终在第一位
· 分类由 AI 自动生成，不需要用户预设
· 收藏数量为 0 的分类不显示
· 点击「更多」展开全部分类 + 管理入口
```

**分类规则**：

| 分类 | 说明 | AI 判断依据 |
|------|------|------------|
| 技术 | 编程、工具、技术文章 | 代码块、技术术语 |
| 商业 | 商业分析、创业、市场 | 商业术语、公司名 |
| 生活 | 生活方式、美食、旅行 | 生活场景、感性叙述 |
| 设计 | UI/UX、平面、产品设计 | 设计术语、视觉描述 |
| 阅读 | 深度文章、书评、思考 | 文章长度、叙事结构 |
| 科学 | 科研、学术、自然 | 学术术语、引用 |
| 其他 | 无法归类的内容 | 默认分类 |

### 标签筛选

分类条下方可展开标签筛选区域：

```
┌──────────────────────────────────────┐
│  🏷 热门标签：                         │
│                                      │
│  ┌──────┐ ┌────┐ ┌──────┐ ┌────┐   │
│  │ Swift │ │ AI │ │ 产品设计│ │ Vue │   │
│  └──────┘ └────┘ └──────┘ └────┘   │
│  ┌────────┐ ┌──────┐ ┌────────┐    │
│  │ 数据库  │ │ 创业  │ │ 架构设计 │    │
│  └────────┘ └──────┘ └────────┘    │
│                                      │
│  点击标签进行筛选，支持多选            │
│  再次点击取消选择                      │
│                                      │
└──────────────────────────────────────┘
```

- 标签由 AI 自动生成，每篇文章 2-5 个标签
- 支持多选筛选（AND 逻辑）
- 标签显示收藏数量角标
- 按使用频率排序

### 时间线视图

在分类筛选条最右侧，有一个切换按钮，可在「列表视图」和「时间线视图」之间切换。

```
┌──────────────────────────────────────┐
│  Folio                 ☰ 列表 │ 📅   │
│                                      │
│  2026                                │
│  │                                   │
│  ├── 2月 ─────────────────────────   │
│  │   │                               │
│  │   ├── 20日  SwiftUI 状态管理...    │
│  │   │        Rust 异步编程入门...     │
│  │   │                               │
│  │   ├── 19日  产品设计的减法...       │
│  │   │        AI Agent 技术栈...      │
│  │   │                               │
│  │   ├── 18日  创业公司的财务...       │
│  │   │                               │
│  │   └── ...                         │
│  │                                   │
│  ├── 1月 ─────────────────────────   │
│  │   │                               │
│  │   ├── 31日  年度阅读总结...        │
│  │   │        ...                    │
│  │   └── ...                         │
│  │                                   │
│  └── ...                             │
│                                      │
│                                         │
└─────────────────────────────────────────┘
```

**时间线特点**：
- 按日期分组，最新的在最上方
- 月份可折叠/展开
- 每条仅显示标题，信息密度高
- 适合回顾「我什么时候收藏过什么」
- 右侧显示当月收藏统计数字

### 内容状态标识

列表中的收藏内容有以下状态：

```
  ● 蓝色圆点   ── 未读（收藏后从未打开阅读）
  ○ 无标记     ── 已读
  ⏳ 沙漏图标   ── 正在处理（抓取/AI 整理中）
  ⚠️ 警告图标   ── 抓取失败（可点击重试）
  📶 离线图标   ── 离线待处理
```

---

## 六、流程 4 — 阅读体验

### 目标

干净、舒适、沉浸。让用户忘记自己在用 App，以为自己在翻一本精心排版的杂志。

### 进入阅读

```
在列表中点击任意内容卡片
       │
       ▼
  页面从右侧滑入（标准 iOS push 动画）
       │
       ▼
┌──────────────────────────────────────┐
│  ← 返回           [···] 更多操作      │
│                                      │
│──────────────────────────────────────│
│                                      │
│  SwiftUI 中的状态管理                  │
│  最佳实践                             │
│                                      │
│  ┌────────────────────────────────┐  │
│  │ 来源：objc.io                   │  │
│  │ 收藏时间：2026-02-20 10:23      │  │
│  │ 分类：技术                      │  │
│  │ 标签：#Swift  #iOS  #架构       │  │
│  └────────────────────────────────┘  │
│                                      │
│  ── AI 摘要 ───────────────────────  │
│                                      │
│  本文介绍了 SwiftUI 中使用            │
│  @Observable 宏替代传统               │
│  ObservableObject 的最佳实践，        │
│  涵盖性能优化和架构设计建议。           │
│                                      │
│  ── 正文 ─────────────────────────  │
│                                      │
│  在 SwiftUI 的演进过程中，状态         │
│  管理一直是核心话题。随着 Swift        │
│  5.9 引入 Observation 框架...         │
│                                      │
│  ## 为什么需要新的方案                 │
│                                      │
│  传统的 ObservableObject 协议         │
│  虽然功能完善，但存在以下问题：         │
│                                      │
│  1. **过度刷新**：任何 @Published     │
│     属性变化都会触发整个视图树刷新      │
│                                      │
│  2. **样板代码**：需要声明协议、       │
│     使用属性包装器...                  │
│                                      │
│  ```swift                            │
│  @Observable                         │
│  class UserStore {                    │
│      var name: String = ""           │
│      var age: Int = 0                │
│  }                                   │
│  ```                                 │
│                                      │
│  ...                                 │
│                                      │
│──────────────────────────────────────│
│                                      │
│   [🔗 原文链接]     [📤 分享]         │
│                                      │
└──────────────────────────────────────┘
```

### 阅读界面设计规范

**Markdown 渲染规则**：

| 元素 | 渲染方式 |
|------|---------|
| `# 标题` | 24pt，Bold，上方 32pt 间距 |
| `## 二级标题` | 20pt，Semibold，上方 24pt 间距 |
| `### 三级标题` | 17pt，Semibold，上方 20pt 间距 |
| 正文 | 17pt，Regular，行高 1.6 |
| `**加粗**` | Bold 字重 |
| `*斜体*` | Italic 字重 |
| `` `代码` `` | 等宽字体，浅灰色背景 |
| 代码块 | 等宽字体，深色背景，语法高亮，可横向滚动 |
| `> 引用` | 左侧竖线，斜体，灰色文字 |
| 列表 | 标准缩进，有序/无序 |
| 图片 | 宽度撑满，点击可放大 |
| 表格 | 可横向滚动，斑马条纹 |
| 链接 | 蓝色文字，点击在 App 内浏览器打开 |

### 文章元信息区域

位于标题下方，正文上方。使用浅灰色背景卡片，与正文视觉区分。

```
┌────────────────────────────────────┐
│                                    │
│  来源     objc.io  →               │
│  收藏时间  2026-02-20 10:23         │
│  分类     技术                      │
│  标签     #Swift  #iOS  #架构       │
│  字数     3,200 字 · 约 10 分钟      │
│                                    │
└────────────────────────────────────┘

· 「来源」可点击，在浏览器打开原文
· 「分类」可点击，跳转到该分类列表
· 「标签」可点击，跳转到该标签列表
· 标签可在此处长按编辑
```

### 阅读中操作

#### 文本高亮

```
长按选中一段文字
       │
       ▼
┌──────────────────────────────────────┐
│                                      │
│  ...SwiftUI 的演进过程中，            │
│  ┌─────────────────────────┐         │
│  │ 状态管理一直是核心话题。  │ ← 选中态 │
│  └─────────────────────────┘         │
│                                      │
│  ┌─────────────────────────────────┐ │
│  │ 🟡 黄色 │ 🟢 绿色 │ 🔵 蓝色 │ 🔴 红色 │ │
│  │─────────────────────────────────│ │
│  │ 📝 添加笔记  │  📋 复制  │  📤 分享 │ │
│  └─────────────────────────────────┘ │
│                                      │
│  随着 Swift 5.9 引入...               │
│                                      │
└──────────────────────────────────────┘
```

**高亮操作菜单**：

| 操作 | 说明 |
|------|------|
| 颜色选择 | 4 种高亮颜色（黄/绿/蓝/红） |
| 添加笔记 | 为高亮文字添加个人批注 |
| 复制 | 复制选中文字 |
| 分享 | 以引用格式分享选中文字 |

#### 阅读底部工具栏

```
┌──────────────────────────────────────┐
│                                      │
│   [🔗 原文链接]     [📤 分享]         │
│                                      │
└──────────────────────────────────────┘
```

| 按钮 | 功能 |
|------|------|
| 🔗 原文链接 | 在 App 内浏览器打开原始 URL |
| 📤 分享 | 系统分享面板，分享 Markdown 文本或原文链接 |

#### 更多操作菜单（右上角 [···]）

```
点击右上角 [···]
       │
       ▼
┌──────────────────────┐
│                      │
│  📝 编辑标签          │
│  📂 修改分类          │
│  📋 复制 Markdown     │
│  🔗 在浏览器打开       │
│  📤 分享              │
│  ──────────────────  │
│  🗑 删除收藏          │
│                      │
└──────────────────────┘
```

### 阅读偏好（隐藏在长按标题触发）

不暴露为显眼的设置入口。长按文章标题区域唤出：

```
┌──────────────────────────────────────┐
│         阅读偏好                      │
│                                      │
│  字号    A-  [  A  ]  A+             │
│                                      │
│  行距    紧凑  [标准]  宽松            │
│                                      │
│  主题    [浅色]  深色  自动            │
│                                      │
│  字体    系统默认  [衬线体]            │
│                                      │
│                        [完成]        │
│                                      │
└──────────────────────────────────────┘
```

偏好设置为全局生效，设置一次后所有文章统一。

---

## 七、流程 5 — 搜索

### 目标

搜索即打字即出结果。基于 SQLite FTS5 的本地全文搜索，不依赖网络。

### 搜索入口

点击底部 Tab「🔍 搜索」进入搜索页面。

### 搜索页面

```
┌──────────────────────────────────────┐
│                                      │
│  ┌──────────────────────────────┐    │
│  │ 🔍 搜索收藏内容...            │    │
│  └──────────────────────────────┘    │
│                                      │
│  ── 最近搜索 ─────────────────────   │
│                                      │
│  SwiftUI 状态管理          ✕         │
│  Rust 异步                 ✕         │
│  产品设计原则               ✕         │
│                                      │
│  [清除搜索历史]                       │
│                                      │
│  ── 热门标签 ─────────────────────   │
│                                      │
│  ┌──────┐ ┌────┐ ┌──────┐          │
│  │ Swift │ │ AI │ │ 产品设计│          │
│  └──────┘ └────┘ └──────┘          │
│  ┌────┐ ┌──────┐ ┌────┐            │
│  │ Vue │ │ 创业  │ │ Rust│            │
│  └────┘ └──────┘ └────┘            │
│                                      │
│                                      │
│                                      │
│                                      │
│                                         │
└─────────────────────────────────────────┘
```

### 搜索过程

```
用户开始输入关键词
       │
       ▼
┌──────────────────────────────────────┐
│                                      │
│  ┌──────────────────────────────┐    │
│  │ 🔍 SwiftUI|                   │    │
│  └──────────────────────────────┘    │
│                                      │
│  ── 搜索建议 ─────────────────────   │
│                                      │
│  SwiftUI 状态管理                     │
│  SwiftUI 动画                        │
│  SwiftUI 布局                        │
│                                      │
│  ── 实时结果（3 篇）──────────────   │
│                                      │
│  ┌──────────────────────────────┐    │
│  │  SwiftUI 中的状态管理最佳实践  │    │
│  │  ...用 @Observable 宏替代...  │    │
│  │  objc.io · 今天 10:23        │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │  SwiftUI 动画系统深度解析      │    │
│  │  ...Animation 协议的设计...   │    │
│  │  swiftbysundell.com · 昨天   │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │  从 UIKit 迁移到 SwiftUI      │    │
│  │  ...渐进式迁移策略...         │    │
│  │  apple.com · 2月18日         │    │
│  └──────────────────────────────┘    │
│                                      │
│                                         │
└─────────────────────────────────────────┘
```

### 搜索结果展示

**关键词高亮**：搜索结果中，匹配的关键词以强调色高亮显示。

**上下文摘要**：不仅显示标题匹配，也显示正文中匹配关键词的上下文片段。

```
┌──────────────────────────────────────┐
│                                      │
│  SwiftUI 中的状态管理最佳实践          │
│                                      │
│  "...在 [SwiftUI] 的演进过程中，      │
│  状态管理一直是核心话题。随着          │
│  Swift 5.9 引入 Observation..."       │
│                                      │
│  objc.io · 今天 10:23  · 技术        │
│                                      │
└──────────────────────────────────────┘

· 方括号 [ ] 表示高亮的关键词
· 显示匹配上下文而非 AI 摘要
· 多处匹配时显示第一处匹配的上下文
```

### 搜索建议逻辑

| 来源 | 优先级 | 说明 |
|------|--------|------|
| 历史搜索 | 高 | 用户曾搜索过的关键词 |
| 标题匹配 | 中 | 文章标题中包含输入前缀的词 |
| 标签匹配 | 中 | 标签名包含输入前缀 |
| 分类匹配 | 低 | 分类名包含输入前缀 |

### 空结果处理

```
┌──────────────────────────────────────┐
│                                      │
│  ┌──────────────────────────────┐    │
│  │ 🔍 量子纠缠|                   │    │
│  └──────────────────────────────┘    │
│                                      │
│                                      │
│                                      │
│         📭                           │
│                                      │
│      没有找到相关内容                  │
│                                      │
│      试试：                          │
│      · 检查关键词是否有错别字          │
│      · 使用更简短的关键词             │
│      · 搜索英文关键词                 │
│                                      │
│                                      │
│                                      │
│                                      │
│                                         │
└─────────────────────────────────────────┘
```

### 搜索性能要求

| 指标 | 要求 |
|------|------|
| 首次按键到出结果 | < 100ms |
| 每次输入到更新结果 | < 50ms |
| 1000 篇文章全文搜索 | < 200ms |
| 10000 篇文章全文搜索 | < 500ms |
| 搜索建议出现 | < 50ms |

**实现要点**：
- 基于 SQLite FTS5，纯本地搜索，不依赖网络
- 支持中英文分词（ICU tokenizer）
- 支持前缀匹配（输入部分关键词即可匹配）
- 搜索范围：标题 + 正文 + 摘要 + 标签

---

## 八、流程 6 — AI 知识问答（Pro+ 功能）

### 目标

基于用户的知识库进行对话式问答。不是通用 AI 聊天，而是「你收藏的知识」的私人助手。

### 入口

知识库主页面右上角出现「AI」入口（仅 Pro+ 用户可见）。

```
┌──────────────────────────────────────┐
│  Folio                  [AI] [+]    │
│                                      │
│  ...列表内容...                       │
│                                      │
└──────────────────────────────────────┘

· 非 Pro+ 用户点击「AI」显示订阅引导
```

### AI 问答界面

```
┌──────────────────────────────────────┐
│  ← 返回          AI 知识问答          │
│                                      │
│──────────────────────────────────────│
│                                      │
│  ┌──────────────────────────────┐    │
│  │  👤 你                       │    │
│  │                              │    │
│  │  SwiftUI 中怎么做状态管理     │    │
│  │  比较好？                    │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │  🤖 Folio                    │    │
│  │                              │    │
│  │  根据你收藏的文章，目前推荐    │    │
│  │  使用 Swift 5.9 引入的        │    │
│  │  @Observable 宏来替代传统的   │    │
│  │  ObservableObject。           │    │
│  │                              │    │
│  │  主要优势：                   │    │
│  │  1. 更精确的视图更新粒度       │    │
│  │  2. 减少样板代码              │    │
│  │  3. 更好的性能表现            │    │
│  │                              │    │
│  │  ── 引用来源 ──              │    │
│  │                              │    │
│  │  📄 SwiftUI 中的状态管理      │    │
│  │     最佳实践                  │    │
│  │     objc.io · 2026-02-20     │    │
│  │     [查看原文 →]              │    │
│  │                              │    │
│  │  📄 从 UIKit 迁移到 SwiftUI   │    │
│  │     apple.com · 2026-02-18   │    │
│  │     [查看原文 →]              │    │
│  │                              │    │
│  └──────────────────────────────┘    │
│                                      │
│                                      │
│  ┌──────────────────────────────┐    │
│  │ 输入你想问的...        [发送] │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

### AI 问答设计要点

1. **知识范围限定**：AI 只基于用户收藏的内容回答。如果知识库中没有相关内容，诚实告知。

```
┌──────────────────────────────────────┐
│  🤖 Folio                            │
│                                      │
│  你的知识库中暂无关于「量子计算」       │
│  的收藏内容。                         │
│                                      │
│  试试收藏一些相关文章，我就能          │
│  帮你分析和总结了。                   │
│                                      │
└──────────────────────────────────────┘
```

2. **引用来源展示**：每个回答都附带引用来源，点击可跳转到对应文章的阅读页。

3. **对话历史**：保留最近 30 天的对话记录，可在顶部下拉查看历史对话。

4. **问答建议**：输入框为空时，显示推荐问题（基于最近收藏内容生成）：

```
┌──────────────────────────────────────┐
│                                      │
│  ── 你可以问我 ──                     │
│                                      │
│  "总结一下我最近收藏的 Swift 文章"     │
│  "这周我收藏了哪些关于 AI 的内容？"    │
│  "帮我对比几种状态管理方案"            │
│                                      │
└──────────────────────────────────────┘
```

### 非 Pro+ 用户引导

```
非 Pro+ 用户点击「AI」入口
       │
       ▼
┌──────────────────────────────────────┐
│                                      │
│     ┌────────────────────────┐       │
│     │                        │       │
│     │    AI 知识问答           │       │
│     │                        │       │
│     │    向你的知识库提问，     │       │
│     │    AI 基于你收藏的内容    │       │
│     │    给出精准回答。        │       │
│     │                        │       │
│     │    此功能包含在          │       │
│     │    Pro+ 订阅中。        │       │
│     │                        │       │
│     │    [了解 Pro+]          │       │
│     │                        │       │
│     │    稍后再说             │       │
│     │                        │       │
│     └────────────────────────┘       │
│                                      │
└──────────────────────────────────────┘
```

---

## 九、流程 7 — 设置与账号

### 目标

极简。用户 95% 的情况不需要进入设置。进入之后也能快速找到需要的选项。

### 设置页结构

```
┌──────────────────────────────────────┐
│  ← 返回             设置             │
│                                      │
│──────────────────────────────────────│
│                                      │
│  ┌──────────────────────────────┐    │
│  │  👤 用户名                    │    │
│  │  user@icloud.com             │    │
│  │  Apple ID 登录            →  │    │
│  └──────────────────────────────┘    │
│                                      │
│  ── 订阅 ──────────────────────────  │
│                                      │
│  ┌──────────────────────────────┐    │
│  │  当前方案    Free              │    │
│  │  本月已用    12 / 30 篇       │    │
│  │  升级到 Pro                →  │    │
│  └──────────────────────────────┘    │
│                                      │
│  ── 数据 ──────────────────────────  │
│                                      │
│  ┌──────────────────────────────┐    │
│  │  iCloud 同步      [关闭]     │    │
│  │  导出数据                  →  │    │
│  │  清除所有数据              →  │    │
│  └──────────────────────────────┘    │
│                                      │
│  ── 关于 ──────────────────────────  │
│                                      │
│  ┌──────────────────────────────┐    │
│  │  版本    1.0.0                │    │
│  │  隐私政策                  →  │    │
│  │  用户协议                  →  │    │
│  │  反馈与建议                →  │    │
│  └──────────────────────────────┘    │
│                                      │
│                                      │
│  [退出登录]                          │
│                                      │
│                                      │
│                                         │
└─────────────────────────────────────────┘
```

### 订阅管理

```
点击「升级到 Pro」
       │
       ▼
┌──────────────────────────────────────┐
│  ← 返回         选择方案              │
│                                      │
│──────────────────────────────────────│
│                                      │
│  ┌──────────────────────────────┐    │
│  │           Free               │    │
│  │                              │    │
│  │   · 每月 30 篇收藏           │    │
│  │   · 基础自动分类             │    │
│  │   · 本地存储                 │    │
│  │                              │    │
│  │          当前方案             │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │       ★ Pro  ¥68/年          │    │
│  │                              │    │
│  │   · 无限收藏                 │    │
│  │   · AI 摘要 & 智能标签        │    │
│  │   · 全文搜索                 │    │
│  │   · 高亮 & 标注              │    │
│  │                              │    │
│  │        [选择 Pro]            │    │
│  └──────────────────────────────┘    │
│                                      │
│  ┌──────────────────────────────┐    │
│  │     ★★ Pro+  ¥128/年         │    │
│  │                              │    │
│  │   · 包含 Pro 全部功能         │    │
│  │   · AI 知识问答              │    │
│  │   · 知识周报                 │    │
│  │   · iCloud 同步              │    │
│  │                              │    │
│  │       [选择 Pro+]            │    │
│  └──────────────────────────────┘    │
│                                      │
│  订阅可随时在系统设置中取消            │
│  [恢复购买]                          │
│                                      │
└──────────────────────────────────────┘
```

**订阅引导触发时机**（不主动打扰，在自然节点引导）：

| 触发场景 | 展示内容 |
|---------|---------|
| 免费用户本月收藏达到 30 篇 | 提示已达上限，展示 Pro 方案 |
| 免费用户尝试使用全文搜索 | 底部 banner 提示升级 Pro |
| 免费用户点击 AI 问答入口 | 展示 Pro+ 方案介绍 |
| 收藏第 10 篇文章时 | 轻量 toast："升级 Pro 享受无限收藏" |

### 数据管理

#### 导出数据

```
点击「导出数据」
       │
       ▼
┌──────────────────────────────┐
│                              │
│       导出你的知识库           │
│                              │
│  ┌────────────────────────┐  │
│  │  📁 Markdown 文件       │  │
│  │  导出所有文章为 .md 文件 │  │
│  │  包含元信息和标签        │  │
│  └────────────────────────┘  │
│                              │
│  ┌────────────────────────┐  │
│  │  📊 JSON 数据           │  │
│  │  导出完整数据            │  │
│  │  包含分类、标签、笔记     │  │
│  └────────────────────────┘  │
│                              │
│  导出的文件将保存到            │
│  「文件」App 的 Folio 目录    │
│                              │
└──────────────────────────────┘
```

#### 清除数据

```
点击「清除所有数据」
       │
       ▼
┌──────────────────────────────┐
│                              │
│    ⚠️ 确认清除？              │
│                              │
│    这将永久删除你在 Folio      │
│    中的所有收藏、标注和设置。   │
│                              │
│    此操作不可撤销。            │
│                              │
│    建议先导出数据备份。        │
│                              │
│    [导出后再清除]             │
│    [直接清除]                 │
│    [取消]                    │
│                              │
└──────────────────────────────┘
```

### iCloud 同步（Pro+ 功能）

```
Pro+ 用户打开 iCloud 同步开关
       │
       ▼
┌──────────────────────────────┐
│                              │
│       iCloud 同步             │
│                              │
│  开启后，你的收藏将在          │
│  所有 iCloud 设备间同步。      │
│                              │
│  · 内容加密存储               │
│  · 仅同步文本和元信息          │
│  · 图片仅缓存在本地           │
│                              │
│  [开启同步]     [取消]        │
│                              │
└──────────────────────────────┘

同步状态显示：
┌──────────────────────────────┐
│  iCloud 同步      [已开启]    │
│  最后同步: 刚刚               │
│  同步状态: ✓ 已完成           │
└──────────────────────────────┘
```

**同步规则**：

| 项目 | 是否同步 |
|------|---------|
| 文章 Markdown 正文 | 是 |
| 文章元信息（标题/来源/时间） | 是 |
| 分类和标签 | 是 |
| 高亮和标注 | 是 |
| 搜索历史 | 否 |
| 阅读偏好设置 | 是 |
| 缓存图片 | 否（设备本地缓存） |
| AI 对话记录 | 否 |

---

## 十、额外流程 — 内容处理异常

### 抓取失败处理

```
文章抓取失败
       │
       ▼
┌──────────────────────────────────────┐
│                                      │
│  ┌──────────────────────────────┐    │
│  │  ⚠️  抓取失败                 │    │
│  │                              │    │
│  │  https://example.com/...     │    │
│  │                              │    │
│  │  可能原因：                   │    │
│  │  · 页面需要登录               │    │
│  │  · 内容被防爬虫保护           │    │
│  │  · 网络连接不稳定             │    │
│  │                              │    │
│  │  [重试]   [删除]   [保留链接] │    │
│  │                              │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

| 操作 | 说明 |
|------|------|
| 重试 | 重新尝试抓取，最多 3 次 |
| 删除 | 删除这条收藏 |
| 保留链接 | 仅保留 URL，不抓取正文。可随时打开原文链接 |

### 重复内容检测

```
用户收藏了一个已存在的 URL
       │
       ▼
┌──────────────────────────────┐
│      Folio Share Extension    │
│                              │
│  ┌────────────────────────┐  │
│  │                        │  │
│  │  📌 这篇已经收藏过了    │  │
│  │                        │  │
│  │  收藏于 2026-02-18      │  │
│  │                        │  │
│  │  [查看]    [知道了]     │  │
│  │                        │  │
│  └────────────────────────┘  │
│                              │
└──────────────────────────────┘

· 「查看」打开 Folio 跳转到该文章
· 「知道了」关闭 Extension
```

---

## 十一、页面流转总图

```
                    ┌───────────────┐
                    │   App 启动     │
                    └──────┬────────┘
                           │
                    ┌──────┴────────┐
                    │  是否首次使用？  │
                    └──┬────────┬───┘
                       │        │
                    是 │        │ 否
                       │        │
              ┌────────┴──┐  ┌──┴─────────┐
              │  欢迎流程   │  │  知识库首页  │
              │  (3页引导)  │  │  (收藏 Tab) │
              └────────┬──┘  └──┬─────────┘
                       │        │
                       ▼        │
              ┌───────────┐     │
              │ Apple ID   │     │
              │ 登录       │     │
              └─────┬─────┘     │
                    │           │
                    ▼           │
              ┌───────────┐     │
              │ 权限说明   │     │
              └─────┬─────┘     │
                    │           │
                    ▼           │
              ┌───────────┐     │
              │ 空状态首页  │     │
              └─────┬─────┘     │
                    │           │
                    ▼           ▼
              ┌──────────────────────────────────┐
              │                                  │
              │          知识库首页                │
              │          (收藏 Tab)               │
              │                                  │
              │  ┌───────┐ ┌──────┐ ┌──────┐    │
              │  │分类筛选│ │标签筛选│ │时间线  │    │
              │  └───────┘ └──────┘ └──────┘    │
              │                                  │
              │  ┌──────────────────────────┐    │
              │  │      内容卡片列表          │    │
              │  │                          │    │
              │  │  点击 → 阅读页            │    │
              │  │  左滑 → 删除              │    │
              │  │  右滑 → 标记已读          │    │
              │  │  长按 → 快捷操作          │    │
              │  │                          │    │
              │  └──────────────────────────┘    │
              │                                  │
              └───────┬──────────┬───────────────┘
                      │          │
            ┌─────────┘          └──────────┐
            │                               │
            ▼                               ▼
    ┌───────────────┐               ┌───────────────┐
    │   阅读页       │               │   搜索页       │
    │               │               │   (搜索 Tab)   │
    │  · Markdown   │               │               │
    │    正文渲染    │               │  · 搜索建议    │
    │  · 高亮标注    │               │  · 实时结果    │
    │  · 元信息      │               │  · 关键词高亮  │
    │  · 分享/操作   │               │               │
    └───────────────┘               └───────────────┘
                                            │
            ┌───────────────┐               │
            │  AI 知识问答   │ ←─────────────┘
            │  (Pro+)       │    从搜索或首页进入
            │               │
            │  · 对话界面    │
            │  · 引用来源    │
            │  · 推荐问题    │
            └───────────────┘

            ┌───────────────┐
            │   设置页       │
            │   (设置 Tab)   │
            │               │
            │  · 账号管理    │
            │  · 订阅管理 → 订阅选择页
            │  · 数据管理 → 导出/清除
            │  · iCloud     │
            │  · 关于       │
            └───────────────┘

外部流程：

    ┌───────────────┐         ┌───────────────┐
    │  任意 App      │ ──→    │ Share          │
    │  (微信/Safari  │  分享   │ Extension     │
    │   /微博/X...) │         │               │
    └───────────────┘         │  自动收藏      │
                              │  1.5秒关闭     │
                              └──────┬────────┘
                                     │
                                     ▼
                              ┌───────────────┐
                              │  后台处理       │
                              │  抓取→转换→    │
                              │  AI整理→存储   │
                              └───────────────┘
```

---

## 十二、手势系统总览

### 全局手势表

| 手势 | 位置 | 作用 | 反馈 |
|------|------|------|------|
| **下拉** | 列表顶部 | 刷新/检查待处理任务 | 标准下拉刷新动画 |
| **左滑** | 列表项 | 显示删除按钮 | 红色背景滑出 |
| **右滑** | 列表项 | 切换已读/未读 | 蓝色背景滑出 |
| **长按** | 列表项 | 快捷操作菜单 | Haptic 反馈 + 菜单弹出 |
| **捏合** | 列表区域 | 切换列表/紧凑视图 | 视图平滑过渡 |
| **左滑边缘** | 阅读页 | 返回列表 | 标准 iOS 返回 |
| **长按文字** | 阅读页 | 高亮/标注 | 选中态 + 操作菜单 |
| **双击** | 阅读页 | 快速收藏/取消收藏 | 心形动画 |
| **点击** | 搜索 Tab | 激活搜索框 | 键盘弹出 |

### 手势冲突处理

| 冲突场景 | 处理方式 |
|---------|---------|
| 左滑（删除）vs 左滑边缘（返回） | 边缘 20pt 内为返回手势，其余为列表操作 |
| 长按（菜单）vs 长按（文字选中） | 列表页为菜单，阅读页为文字选中 |
| 下拉（刷新）vs 下拉（关闭） | 仅列表顶部触发刷新 |

---

## 十三、视觉方向

### 设计关键词

**安静。高效。有质感。**

- **安静**：没有渐变，没有阴影堆砌，没有花哨的过渡。界面干净到让人心安。
- **高效**：信息层级清晰。一眼区分标题、摘要、元信息。不需要思考就能找到内容。
- **有质感**：微妙的背景纹理、精心的间距、考究的字体搭配。像一本排版精良的杂志。

### 色彩系统

```
── 基础色 ──

背景色：     #FAFAF8   （温暖的近白，比纯白柔和，不刺眼）
卡片背景：   #FFFFFF   （纯白，与背景形成微妙层次）
一级文字：   #1A1A1A   （近黑，正文）
二级文字：   #6B6B6B   （中灰，摘要、辅助信息）
三级文字：   #9B9B9B   （浅灰，时间戳、来源）
分割线：     #F0F0EC   （极浅灰，几乎隐形的分割）

── 功能色 ──

主强调色：   #2C2C2C   （深炭灰，用于按钮、选中态）
链接色：     #4A7C59   （暗绿，安静的链接色，不是刺眼的蓝）
未读标记：   #5B8AF0   （淡蓝，小圆点）
成功反馈：   #5B9A6B   （暗绿，完成状态）
警告色：     #C4793C   （暗橙，注意事项）
错误色：     #C44B4B   （暗红，删除、失败）

── 高亮色 ──

黄色高亮：   #FFF3C4   （柔和黄）
绿色高亮：   #D4EDDA   （柔和绿）
蓝色高亮：   #CCE5FF   （柔和蓝）
红色高亮：   #F8D7DA   （柔和红）

── 标签色 ──

标签背景：   #F2F2ED   （极浅灰，与背景区分）
标签文字：   #4A4A4A   （深灰）
标签边框：   无边框，纯靠背景色区分
```

**色彩使用原则**：

1. **界面以灰度为主**。90% 的界面是黑白灰。颜色只用在需要「说话」的地方——未读标记、链接、高亮。
2. **不用蓝色做链接色**。Folio 用暗绿色，更安静、更文艺。蓝色太互联网、太工具化。
3. **暗色模式自动适配**。背景色反转为 `#1C1C1E`，文字反转为 `#E5E5E5`，保持同样的安静感。

### 字体系统

```
── 界面文字 ──

导航标题：   SF Pro Display / 苹方，20pt，Semibold
页面标题：   SF Pro Display / 苹方，28pt，Bold
列表标题：   SF Pro Text / 苹方，17pt，Semibold
正文：       SF Pro Text / 苹方，15pt，Regular
辅助文字：   SF Pro Text / 苹方，13pt，Regular
标签：       SF Pro Text / 苹方，13pt，Medium

── 阅读页文字 ──

文章标题：   Noto Serif SC（思源宋体），24pt，Bold
文章正文：   Noto Serif SC（思源宋体），17pt，Regular，行高 1.7
代码块：     SF Mono / Menlo，14pt，Regular
引用：       Noto Serif SC，16pt，Italic，灰色

── 英文内容 ──

文章标题：   Georgia / New York，24pt，Bold
文章正文：   Georgia / New York，17pt，Regular，行高 1.6
```

**字体使用原则**：

1. **界面用无衬线体（苹方/SF Pro）**。干净、高效、不抢注意力。
2. **阅读用衬线体（思源宋体/Georgia）**。有书卷气，让阅读像看纸质杂志。
3. **不用自定义花哨字体**。Folio 追求的质感来自间距和排版，不来自字体的装饰性。

### 图标系统

使用 SF Symbols，不使用自定义图标。原因：

1. 与 iOS 系统风格统一
2. 自动适配 Dynamic Type
3. 自动适配暗色模式
4. 减少包体积

图标使用规范：

| 位置 | 粗细 | 尺寸 |
|------|------|------|
| 工具栏 | Regular | 24pt |
| 导航栏 | Regular | 20pt |
| 列表操作 | Medium | 22pt |
| 内联图标 | Light | 16pt |

### 动画原则

**三个字：轻、准、少。**

| 原则 | 说明 | 示例 |
|------|------|------|
| **轻** | 动画不应该被注意到。它是润滑剂，不是表演 | 页面切换：标准 iOS push，300ms |
| **准** | 动画服务于功能认知，不是装饰 | 收藏成功：勾号从无到有，200ms |
| **少** | 能不动就不动。只在状态变化时使用动画 | 不要给列表加入场动画 |

**具体动画清单**（只有这些，多一个都不加）：

| 场景 | 动画 | 时长 | 缓动 |
|------|------|------|------|
| 页面推入 | 标准 iOS push | 300ms | ease-in-out |
| 页面返回 | 标准 iOS pop | 300ms | ease-in-out |
| Share Extension 完成 | 勾号绘制 | 200ms | ease-out |
| 左滑删除 | 背景色滑出 | 200ms | ease-out |
| 下拉刷新 | 标准 UIRefreshControl | 系统默认 | 系统默认 |
| 搜索结果出现 | 淡入 | 150ms | ease-in |
| 空状态出现 | 淡入 + 上移 8pt | 300ms | ease-out |
| Toast 提示 | 淡入 → 停留 2s → 淡出 | 200ms + 200ms | ease-in-out |
| 标签选中 | 背景色过渡 | 150ms | ease-in-out |

**不使用的动画**：
- 弹簧效果（bouncing）
- 粒子效果
- 3D 翻转
- 视差滚动
- 列表项入场动画
- 任何会让用户「等一下」的动画

### 间距系统

采用 4pt 基准网格：

```
最小间距：   4pt   （紧凑元素之间）
小间距：     8pt   （同组元素之间）
标准间距：   16pt  （不同元素之间）
大间距：     24pt  （不同区块之间）
超大间距：   32pt  （页面级分隔）
安全区：     16pt  （内容距屏幕边缘）
```

### 圆角系统

```
小圆角：     4pt   （标签、小按钮）
中圆角：     8pt   （卡片、缩略图）
大圆角：     12pt  （弹窗、底部面板）
全圆角：     圆形   （头像、未读标记）
```

---

## 十四、国际化设计

Folio 首发支持中英文双语。

### 语言切换

跟随系统语言设置，不提供 App 内语言切换选项。

### 中英文适配要点

| 场景 | 中文 | English |
|------|------|---------|
| App 名称 | Folio · 页集 | Folio |
| 一句话 | 分享链接，知识留住 | Share links. Keep knowledge. |
| Tab - 收藏 | 收藏 | Library |
| Tab - 搜索 | 搜索 | Search |
| Tab - 设置 | 设置 | Settings |
| 空状态标题 | 你的知识库还是空的 | Your library is empty |
| 搜索占位符 | 搜索收藏内容... | Search your library... |
| 收藏成功 | 已添加到 Folio | Added to Folio |
| AI 摘要标签 | AI 摘要 | AI Summary |

### 文案原则

- **中文**：简洁，不用网络流行语，不用感叹号。像一个安静的朋友在说话。
- **英文**：简洁，不用俚语，不用大写强调。保持与中文同样的安静调性。

---

## 十五、Free/Pro/Pro+ 功能边界

### 功能对照表

| 功能 | Free | Pro ¥68/年 | Pro+ ¥128/年 |
|------|------|-----------|-------------|
| Share Extension 收藏 | 30篇/月 | 无限 | 无限 |
| 自动抓取正文 | ✓ | ✓ | ✓ |
| Markdown 转换 | ✓ | ✓ | ✓ |
| 基础自动分类 | ✓ | ✓ | ✓ |
| AI 智能标签 | ✗ | ✓ | ✓ |
| AI 一句话摘要 | ✗ | ✓ | ✓ |
| 全文搜索 | 标题搜索 | ✓ | ✓ |
| 高亮 & 标注 | ✗ | ✓ | ✓ |
| 沉浸阅读 | ✓ | ✓ | ✓ |
| 离线阅读 | ✓ | ✓ | ✓ |
| 阅读偏好设置 | ✓ | ✓ | ✓ |
| 数据导出 | ✗ | ✓ | ✓ |
| AI 知识问答 | ✗ | ✗ | ✓ |
| 知识周报 | ✗ | ✗ | ✓ |
| iCloud 同步 | ✗ | ✗ | ✓ |

### 免费用户限制交互

当免费用户触碰 Pro 功能时，不弹阻断式弹窗，而是用底部非模态 banner 提示：

```
┌──────────────────────────────────────┐
│                                      │
│  ...正常页面内容...                    │
│                                      │
│──────────────────────────────────────│
│  ┌──────────────────────────────┐    │
│  │  ★ 升级 Pro 解锁全文搜索      │    │
│  │              [了解详情]  [✕]  │    │
│  └──────────────────────────────┘    │
│                                      │
│                                         │
└─────────────────────────────────────────┘
```

**原则**：提示一次，关掉就不再显示（同一场景 24 小时内不重复提示）。Folio 不骚扰用户。

---

## 十六、错误状态与边界情况

### 网络错误

```
┌──────────────────────────────┐
│                              │
│        📶                    │
│                              │
│   网络连接不可用               │
│                              │
│   离线内容仍可正常阅读。       │
│   新收藏将在联网后自动处理。   │
│                              │
│        [重试]                │
│                              │
└──────────────────────────────┘
```

### 存储空间不足

```
┌──────────────────────────────┐
│                              │
│   ⚠️ 设备存储空间不足          │
│                              │
│   Folio 当前占用：1.2 GB      │
│                              │
│   建议：                      │
│   · 清理已读内容的图片缓存     │
│   · 导出并删除旧内容           │
│                              │
│   [清理缓存]    [管理内容]    │
│                              │
└──────────────────────────────┘
```

### 内容抓取部分失败

```
┌──────────────────────────────────────┐
│                                      │
│  ┌──────────────────────────────┐    │
│  │  文章标题                     │    │
│  │                              │    │
│  │  ℹ️ 部分内容未能完整抓取       │    │
│  │  正文已保存，但以下内容缺失：  │    │
│  │  · 2 张图片无法加载           │    │
│  │                              │    │
│  │  [查看原文]  [忽略]           │    │
│  │                              │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

---

## 十七、无障碍设计

### VoiceOver 支持

| 元素 | 无障碍标签 |
|------|----------|
| 内容卡片 | "文章：{标题}，来源 {来源}，{时间}，{未读/已读}" |
| 分类标签 | "分类：{分类名}，{数量} 篇文章" |
| 搜索框 | "搜索收藏内容" |
| Share Extension | "已添加到 Folio" |
| 高亮按钮 | "高亮选中文字，{颜色}" |

### Dynamic Type 支持

所有文字元素支持 Dynamic Type，从 xSmall 到 AX5 全范围。

### 对比度

所有文字/背景组合满足 WCAG AA 标准（对比度 >= 4.5:1）。

---

## 更新记录

| 日期 | 版本 | 变更内容 |
|------|------|---------|
| 2026-02-20 | 1.0 | 创建核心交互流程文档，包含 7 个核心流程、信息架构、手势系统、视觉方向 |
